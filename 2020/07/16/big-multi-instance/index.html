<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/zeebe-chaos/rss.xml" title="Zeebe Chaos Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zeebe-chaos/atom.xml" title="Zeebe Chaos Blog Atom Feed"><title data-react-helmet="true">Big Multi Instance | Zeebe Chaos</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://zeebe-io.github.io/zeebe-chaos/2020/07/16/big-multi-instance"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Big Multi Instance | Zeebe Chaos"><meta data-react-helmet="true" name="description" content="* investigate and fix automated chaos experiments - works again with 88c404f and cd8d685"><meta data-react-helmet="true" property="og:description" content="* investigate and fix automated chaos experiments - works again with 88c404f and cd8d685"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-07-16T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/zelldon"><link data-react-helmet="true" rel="shortcut icon" href="/zeebe-chaos/img/zeebe-logo.png"><link data-react-helmet="true" rel="canonical" href="https://zeebe-io.github.io/zeebe-chaos/2020/07/16/big-multi-instance"><link data-react-helmet="true" rel="alternate" href="https://zeebe-io.github.io/zeebe-chaos/2020/07/16/big-multi-instance" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://zeebe-io.github.io/zeebe-chaos/2020/07/16/big-multi-instance" hreflang="x-default"><link rel="stylesheet" href="/zeebe-chaos/assets/css/styles.6f65080a.css">
<link rel="preload" href="/zeebe-chaos/assets/js/runtime~main.f0036049.js" as="script">
<link rel="preload" href="/zeebe-chaos/assets/js/main.b9a5d04f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zeebe-chaos/"><img src="/zeebe-chaos/img/zeebe-logo.png" alt="Zeebe" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/zeebe-chaos/img/zeebe-logo.png" alt="Zeebe" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Zeebe Chaos</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zeebe-chaos/">Chaos Summaries</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zeebe-io/zeebe-chaos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">All posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2022/02/15/Standalone-Gateway-in-CCSaaS">Standalone Gateway in CCSaaS</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2022/02/01/High-Snapshot-Frequency">High Snapshot Frequency</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2022/01/19/big-variables">Handling of Big Variables</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/11/24/Worker-count-should-not-impact-performance">Worker count should not impact performance</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/11/11/Not-produce-duplicate-Keys">Not produce duplicate Keys</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/10/29/Throughput-on-big-state">Throughput on big state</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/10/05/recovery-time">Recovery (Fail Over) time</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/09/23/Old-Clients">Old-Clients</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/07/06/Slow-Network">Slow Network</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/06/08/Full-Disk">Full Disk Recovery</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/05/25/Reset-Clock">Time travel Experiment</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/04/29/Corrupted-Snapshot">Corrupted Snapshot Experiment Investigation</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/04/03/bpmn-meets-chaos-engineering">BPMN meets Chaos Engineering</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/03/30/set-file-immutable">Set file immutable</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/03/23/camunda-cloud-network-partition">Camunda Cloud network partition</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/03/09/cont-workflow-instance">Fault-tolerant processing of process instances</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/02/23/automate-deployments-dist">Automating Deployment Distribution Chaos Experiment</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/01/26/deployments">Deployment Distribution</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/01/19/network-partition">Network partitions</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2021/01/07/disconnect-leader-and-follower">Disconnect Leader and one Follower</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/11/24/message-correlation-after-failover">Message Correlation after Failover</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/11/11/job-timeouts">Many Job Timeouts</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/11/03/investigate-failing-tests">Investigate failing Chaos Tests</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/10/20/non-graceful-shutdown">Non-graceful Shutdown Broker</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/10/27/standalone-gw-memory">Gateway memory consumption</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/10/13/multiple-leader-changes">Multiple Leader Changes</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/10/06/toxi-proxy">Play around with ToxiProxy</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/08/20/experiment-with-camunda-cloud">Experiment with Camunda Cloud</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/08/06/low-load">Experiment with Low Load</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/07/30/experiment-without-exporters">Experiment without Exporters</a></li><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/zeebe-chaos/2020/07/16/big-multi-instance">Big Multi Instance</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/07/09/timer-and-huge-variables">Experiment with Timers and Huge Variables</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/07/02/extract-k8-resources">Extract K8 resources from namespace</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/06/25/gateway-network-partition">Gateway Network Partition</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/06/18/correlate-message-after-failover">Correlate Message after failover</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/06/11/high-cpu-gateway">High CPU load on Standalone Gateway</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/zeebe-chaos/2020/06/04/first-chaos-day">First Chaos Day!</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Big Multi Instance</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2020-07-16T00:00:00.000Z" itemprop="datePublished">July 16, 2020</time> Â· 3 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/zelldon" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://github.com/zelldon.png" alt="Christopher Zell"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/zelldon" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Christopher Zell</span></a></div><small class="avatar__subtitle" itemprop="description">Chaos Engineer @ Zeebe</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>investigate and fix automated chaos experiments - works again with <a href="https://github.com/zeebe-io/zeebe-chaos/commit/88c404f97514d4a7a511ce9751085acdd1720cd9" target="_blank" rel="noopener noreferrer">88c404f</a> and <a href="https://github.com/zeebe-io/zeebe-chaos/commit/cd8d685b83eaa1ac9050ad3d16868389e1c0c36d" target="_blank" rel="noopener noreferrer">cd8d685</a></li><li>Closed some issues in the backlog</li><li>Run a chaos experiment with bigger multi instance to reach <code>maxMessageSize</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="chaos-experiment"></a>Chaos Experiment<a class="hash-link" href="#chaos-experiment" title="Direct link to heading">#</a></h2><p> We wanted to run a chaos experiment, which covers <a href="https://github.com/zeebe-io/zeebe-chaos/issues/33" target="_blank" rel="noopener noreferrer">#33</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="expected"></a>Expected<a class="hash-link" href="#expected" title="Direct link to heading">#</a></h3><p> If we reach <code>maxMessageSize</code> in a workflow instance, for example via variables we expect that an incident is created or at least an error event and we can see that in operate. Furthermore we expect that the partition processing is not stopped, which means we can still create new instances.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="actual"></a>Actual<a class="hash-link" href="#actual" title="Direct link to heading">#</a></h3><p> The experiment uses parallel multiInstance service tasks, to create a lot of tasks which should be completed with big variables.</p><p> <img alt="multiInstance" src="/zeebe-chaos/assets/images/multiInstance-34834f33ef17ba5beebfe4801420587d.png"></p><p> On collecting the output the <code>maxMessageSize</code> should be reached and we expected either an incident or exception for this instance. This should not affect other workflow instance creations.</p><p> <img alt="overview" src="/zeebe-chaos/assets/images/overview-7c0f42db61db06446bc93d8a94b04fcf.png"></p><p> In operate we can see that we have two running workflow instances, one was started after the first failed. Later we created multiple instance&#x27;s in a loop, without issues. This means we are not breaking partition processing, otherwise we would see timeouts.</p><p> The problem we have is that we are not able to see in Operate that the workflow instance is actually broken. We have no indication for that.</p><p> <img alt="broken-multi" src="/zeebe-chaos/assets/images/broken-multi-0df164bbc4633660c5926c2d9caa9b84.png"></p><p> The instances seem still to be in starting the multi instance, but actually they are already blacklisted. If we check the logs we can find the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">I 2020-07-16T13:05:20.630315Z Error event was committed, we continue with processing. </span></span><span class="token-line" style="color:#393A34"><span class="token plain">E 2020-07-16T13:05:26.699139Z Expected to write one or more follow up events for event &#x27;LoggedEvent [type=0, version=0, streamId=2, position=567, key=4503599627370769, timestamp=1594904720629, sourceEventPosition=565]&#x27; without errors, but exception was thrown. </span></span><span class="token-line" style="color:#393A34"><span class="token plain">E 2020-07-16T13:05:26.735966Z Expected to process event &#x27;TypedEventImpl{metadata=RecordMetadata{recordType=EVENT, intentValue=255, intent=ELEMENT_ACTIVATED, requestStreamId=-2147483648, requestId=-1, protocolVersion=1, valueType=WORKFLOW_INSTANCE, rejectionType=NULL_VAL, rejectionReason=}, value={&quot;bpmnProcessId&quot;:&quot;chaos&quot;,&quot;version&quot;:2,&quot;workflowKey&quot;:2251799813685359,&quot;workflowInstanceKey&quot;:4503599627370761,&quot;elementId&quot;:&quot;chaosTask&quot;,&quot;flowScopeKey&quot;:4503599627370769,&quot;bpmnElementType&quot;:&quot;SERVICE_TASK&quot;,&quot;parentWorkflowInstanceKey&quot;:-1,&quot;parentElementInstanceKey&quot;:-1}}&#x27; without errors, but exception occurred with message &#x27;Expected to claim segment of size 8439432, but can&#x27;t claim more than 4194304 bytes.&#x27; . </span></span><span class="token-line" style="color:#393A34"><span class="token plain">W 2020-07-16T13:05:26.737532Z Blacklist workflow instance 4503599627370761, due to previous errors. </span></span><span class="token-line" style="color:#393A34"><span class="token plain">I 2020-07-16T13:05:26.738421Z Error record was written at 568, we will continue with processing if event was committed. Current commit position is 567. </span></span><span class="token-line" style="color:#393A34"><span class="token plain">I 2020-07-16T13:05:26.793523Z Error event was committed, we continue with processing.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>I created a feature request for operate <a href="https://jira.camunda.com/browse/OPE-1037" target="_blank" rel="noopener noreferrer">OPE-1037</a></p><p>In general chaos experiment succeeded, since we not breaking processing and we are still able to process other instances, but we only see that the instance is blacklisted in the logs not in operate, which is a problem from my POV. Furthermore a bit unexpected was, that we already failed before, we are not able to activate jobs, since the size of the multi instance was already to big.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="code"></a>Code<a class="hash-link" href="#code" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    // create zeebe client</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var client = ZeebeClient.Builder()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .UseLoggerFactory(new NLogLoggerFactory())</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .UseGatewayAddress(ZeebeUrl)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .UseTransportEncryption()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .UseAccessTokenSupplier(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            CamundaCloudTokenProvider.Builder()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .UseAuthServer(AuthServer)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .UseClientId(ClientId)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .UseClientSecret(ClientSecret)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .UseAudience(Audience)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Build())</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .Build();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var topology = await client.TopologyRequest().Send();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Logger.Info(topology.ToString);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.WriteLine(topology);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // deploy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var deployResponse = await client.NewDeployCommand()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .AddResourceFile(DemoProcessPath)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .Send();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // create workflow instance</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var intArray = Enumerable.Range(0, 10_000).ToArray();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var jsonObject = new {list = intArray};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var jsonString = JsonConvert.SerializeObject(jsonObject);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    await client.NewCreateWorkflowInstanceCommand()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .BpmnProcessId(&quot;chaos&quot;).LatestVersion()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Variables(jsonString)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Send();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // open job worker</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    using (var signal = new EventWaitHandle(false, EventResetMode.AutoReset))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        client.NewWorker()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .JobType(JobType)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .Handler(HandleJob)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .MaxJobsActive(120)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .Name(WorkerName)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .AutoCompletion()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .PollInterval(TimeSpan.FromMilliseconds(100))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .Timeout(TimeSpan.FromSeconds(10))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .PollingTimeout(TimeSpan.FromSeconds(30))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              .Open();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // blocks main thread, so that worker can run</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        signal.WaitOne();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">private static void HandleJob(IJobClient jobClient, IJob job)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Logger.Debug(&quot;Handle job {job}&quot;, job.Key);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var bigPayload = File.ReadAllText(PayloadPath);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    jobClient.NewCompleteJobCommand(job).Variables(bigPayload).Send();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="participants"></a>Participants<a class="hash-link" href="#participants" title="Direct link to heading">#</a></h2><ul><li>@zelldon</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zeebe-chaos/2020/07/30/experiment-without-exporters"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Experiment without Exporters</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zeebe-chaos/2020/07/09/timer-and-huge-variables"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Experiment with Timers and Huge Variables Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#chaos-experiment" class="table-of-contents__link">Chaos Experiment</a><ul><li><a href="#expected" class="table-of-contents__link">Expected</a></li><li><a href="#actual" class="table-of-contents__link">Actual</a></li><li><a href="#code" class="table-of-contents__link">Code</a></li></ul></li><li><a href="#participants" class="table-of-contents__link">Participants</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/zeebe" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://forum.camunda.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Camunda" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/zeebe-io/zeebe-chaos/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Zeebe Chaos. Built with Docusaurus.</div></div></div></footer></div>
<script src="/zeebe-chaos/assets/js/runtime~main.f0036049.js"></script>
<script src="/zeebe-chaos/assets/js/main.b9a5d04f.js"></script>
</body>
</html>